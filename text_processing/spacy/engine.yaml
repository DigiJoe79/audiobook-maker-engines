schema_version: 2

# IDENTITY
name: "spacy"
display_name: "spaCy Text Processor"
engine_type: "text"
description: "NLP-based text segmentation for TTS pipelines using spaCy sentence boundaries"

# UPSTREAM
upstream:
  name: "spaCy"
  url: "https://github.com/explosion/spaCy"
  license: "MIT"

# DISTRIBUTION (Docker)
variants:
  - tag: "latest"
    platforms: ["linux/amd64", "linux/arm64"]
    requires_gpu: false

# MODELS (baked into Docker image)
models:
  - name: "de_core_news_md"
    display_name: "German (MD)"
    languages: [de]
  - name: "en_core_web_md"
    display_name: "English (MD)"
    languages: [en]

default_model: "en_core_web_md"

# LANGUAGES
supported_languages:
  - de
  - en
  - es
  - fr
  - it
  - nl
  - pl
  - pt
  - ru
  - zh
  - ja

# CAPABILITIES
capabilities:
  supports_model_hotswap: true

# UI PARAMETERS
parameters:
  mark_oversized:
    type: "bool"
    label: "settings.text.spacy.markOversized"
    description: "settings.text.spacy.markOversizedDesc"
    default: true
    category: "segmentation"

# ENGINE-SPECIFIC CONFIG
engine_config:
  # Device configuration - CPU only (CUDA removed, no benefit for text segmentation)
  device: "cpu"

  # Model tier - MD models only (balanced speed/accuracy, sufficient for segmentation)
  model_tier: "md"

  # Model mapping per language (MD models only)
  # Note: Named 'spacy_models' to avoid conflict with base discovery 'models' field
  spacy_models:
    md:
      de: "de_core_news_md"
      en: "en_core_web_md"
      es: "es_core_news_md"
      fr: "fr_core_news_md"
      it: "it_core_news_md"
      nl: "nl_core_news_md"
      pl: "pl_core_news_md"
      pt: "pt_core_news_md"
      ru: "ru_core_news_md"
      zh: "zh_core_web_md"
      ja: "ja_core_news_md"

# INSTALLATION (for subprocess engines)
installation:
  python_version: "3.12"
  venv_path: "./venv"
